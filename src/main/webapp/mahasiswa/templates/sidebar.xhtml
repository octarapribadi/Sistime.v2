<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:body>
    <ui:composition>
        <h:form id="form_gambarprofil">
            <div style="display: flex; justify-content: center; margin: 3px;">
                <!--<img src="${pageContext.request.contextPath}/resources/images/no_profile.png" alt="profil" id="img_profile"
                     style="border-radius: 8px;padding: 5px; width: 90%;" onclick="PF('dialog_form_profile').show()"/>
                     -->
                <p:graphicImage value="#{gambarProfilBean.pp}" stream="false"
                                style="border-radius: 15px;padding:5px; width:60%"
                                alt="profil" id="img_profile" onclick="PF('dialog_form_profile').show()"/>
            </div>
        </h:form>
        <h:form id="form_uploadprofile" enctype="multipart/form-data">
            <p:dialog header="Ubah Foto Profil" responsive="true" widgetVar="dialog_form_profile"
                      modal="true" appendTo="@(body)">
                <p:outputPanel id="panel_profile">
                    <p:fileUpload label="pilih foto" listener="#{gambarProfilBean.handleGambarProfil}"
                                  multiple="false" update=":form_gambarprofil:img_profile :form_messages:messages"
                                  allowTypes="/(\.|\/)(jpg|jpeg|png)$/" invalidFileMessage="pilih format jpg atau png"
                                  sizeLimit="#{initParam['sistime.size_limit']}"
                                  invalidSizeMessage="maksimal #{initParam['sistime.size_limit']/1024/1024} MB"
                                  accept=".jpg,.jpeg,.png"/>
                </p:outputPanel>
            </p:dialog>
        </h:form>
        <p:tieredMenu styleClass="w-full border-0 bg-gray-100">
            <p:submenu label="Profil" expanded="true" icon="pi pi-id-card">
                <p:menuitem value="Profil" icon="pi pi-address-book"
                            url="/mahasiswa/profile"/>
                <p:menuitem value="Akun" icon="pi pi-cog" url="/mahasiswa/profile/akun_settings.xhtml"/>
            </p:submenu>
            <p:submenu label="Dokumen" icon="pi pi-upload">
                <p:menuitem value="Upload" icon="pi pi-file" url="/mahasiswa/dokumen/upload.xhtml"/>
            </p:submenu>
            <p:submenu label="Akademik" icon="pi pi-book">
                <p:menuitem value="KRS" icon="pi pi-book" url="/mahasiswa/akademik/krs.xhtml"/>
                <p:menuitem value="KHS" icon="pi pi-book" url="/mahasiswa/akademik/khsmahasiswa.xhtml"/>
                <p:menuitem value="Transkrip" icon="pi pi-book" url="/mahasiswa/akademik/transkrip.xhtml"/>
                <p:menuitem value="PAM" icon="pi pi-list-check" url="/mahasiswa/akademik/pam.xhtml"/>
            </p:submenu>
            <p:divider/>
            <p:menuitem value="Log Out" icon="pi pi-fw pi-sign-out" action="#{logoutBean.logout()}"/>
        </p:tieredMenu>
    </ui:composition>
</h:body>
</html>